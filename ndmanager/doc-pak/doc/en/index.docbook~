<?xml version="1.0" ?>
<!DOCTYPE book PUBLIC "-//KDE//DTD DocBook XML V4.1.2-Based Variant V1.1//EN" "dtd/kdex.dtd" [
  <!ENTITY ndmanager "<application>NDManager</application>">
  <!ENTITY kappname "&ndmanager;">
  <!ENTITY kapp "&ndmanager;">  
  <!ENTITY % addindex "IGNORE">
  <!ENTITY % English "INCLUDE">
]>


<book lang="&language;">

<bookinfo>
<title>The &ndmanager; Handbook</title>

<authorgroup>
<author>
<firstname></firstname>
<othername></othername>
<surname>Lynn Hazan</surname>
<affiliation>
<address><email>lynn.hazan@myrealbox.com</email></address>
</affiliation>
</author>
</authorgroup>

<copyright>
<year>2006</year>
<holder>Lynn Hazan</holder>
</copyright>
<legalnotice>&FDLNotice;</legalnotice>

<!-- Date and version information of the documentation
Don't forget to include this last date and this last revision number, we
need them for translation coordination !
Please respect the format of the date (YYYY-MM-DD) and of the version
(V.MM.LL), it could be used by automation scripts.
Do NOT change these in the translation. -->

<date>26/11/2006</date>
<releaseinfo>1.2.1</releaseinfo>

<!-- Abstract about this handbook -->

<abstract>
<para>
&ndmanager; (Neurophysiological Data Manager) is a graphical frontend which helps you create and modify parameter files used by other programs. It also launchs and monitors data processing.
</para>
<para>
&ndmanager; is developed by Lynn Hazan in <ulink url="http://osiris.rutgers.edu">G. Busk's lab</ulink> (CMBN, Rutgers Newark, USA).
</para>
</abstract>

<!-- This is a set of Keywords for indexing by search engines.
Please at least include KDE, the KDE package it is in, the name
 of your application, and a few relevant keywords. -->

<keywordset>
<keyword>KDE</keyword>
<keyword>nd Manager</keyword>
<keyword>XML</keyword>
<keyword>Manager</keyword>
</keywordset>

</bookinfo>

<chapter id="introduction">
<title>Introduction</title>

<!-- The introduction chapter contains a brief introduction for the
application that explains what it does and where to report
problems. Basically a long version of the abstract.  Don't include a
revision history. (see installation appendix comment) -->

<para>
&ndmanager; is a Neurophysiological Data Manager is a graphical frontend which helps you create and modify parameter files used by the programs which are part of the same larger data analysis framework. This programs include <ulink url="http://klusters.sourceforge.net">Klusters</ulink>, <ulink url="http://neuroscope.sourceforge.net">NeuroScope</ulink> and other utilities.
</para>
<para>
&ndmanager; also launches and monitors the different steps of the data processing.
</para>
</chapter>

<chapter id="parameter-file-creation-modification">
<title>Creation and Modification of Parameter Files</title>
<para>
<screenshot>
<screeninfo>Here's a screenshot of &ndmanager;</screeninfo>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="Images/ndmanager.png" format="PNG"/>
	  </imageobject>
	  <imageobject>
	    <imagedata fileref="Images/ndmanager.eps" format="EPS"/>
	  </imageobject>
	  <textobject>
	    <phrase>ndmanager</phrase>
	  </textobject>
	</mediaobject>
</screenshot>
</para>

<sect1 id="starting">
<title>Starting a session</title>
<para>
 &ndmanager; has two modes, a default mode and an <guilabel>Expert Mode</guilabel>. In the default mode, only the most commonly used features are available.
 The <guilabel>Expert Mode</guilabel> allows you to modify advanced features. To switch to the <guilabel>Expert Mode</guilabel>, select <menuchoice> <guimenu>Settings</guimenu> <guimenuitem>Expert Mode</guimenuitem> </menuchoice> (selecting this menu item a second time will toggle its status and set the default mode back).
</para>
<para>
The following sections will describe all the available features (common features and advance features).
</para>
<sect2 id="creating">
<title>Creating a Parameter File</title>
<para>
The creation of a new file is based on an existing file. This file can be either the default file or any existing file you wish.
</para>
<para>
If you select <menuchoice> <guimenu>File</guimenu> <guimenuitem>New</guimenuitem> </menuchoice>. The default file will be used. &ndmanager; comes with a default file containing a set of default values. This file can be overloaded. To set a current file as the default file, simply select <menuchoice> <guimenu>File</guimenu> <guimenuitem>Save as Default</guimenuitem> </menuchoice>. Thereafter, when creating a new file, the default file you have chosen will be used.
</para>
<para>
To create a new file based on an existing file (different from the default file), simply select <menuchoice> <guimenu>File</guimenu> <guimenuitem>Import File as Model...</guimenuitem> </menuchoice>. When saving the file you will be prompt for a new name.
</para>
</sect2>
<sect2 id="modifying">
<title>Modifying a Parameter File</title>
<para>
You can modify an existing parameter file at any time. To load an existing file select <menuchoice> <guimenu>File</guimenu> <guimenuitem>Open</guimenuitem> </menuchoice> or <menuchoice> <guimenu>File</guimenu> <guimenuitem>Open Recent</guimenuitem> </menuchoice>.
</para>
<para>
The different sections of the parameter file are presented on separated pages of a tree view. Each of those sections are explained in the following chapters.
</para>
</sect2>
</sect1>


<sect1 id="general">
<title>General Page</title>

<para>
<screenshot>
<screeninfo>Here's a screenshot of &ndmanager;</screeninfo>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="Images/general.png" format="PNG"/>
	  </imageobject>
	  <imageobject>
	    <imagedata fileref="Images/general.eps" format="EPS"/>
	  </imageobject>
	  <textobject>
	    <phrase>ndmanager</phrase>
	  </textobject>
	</mediaobject>
</screenshot>
</para>

<para>This page allows you to specify to provide general information about the experiment session. The fields are self explanatory.</para>
<para>Upon the opening of a new file, when using &ndmanager; default file, the date is set to the current date and the experimenter(s) field is filled with the login of the currently logged user.</para>
</sect1>
<sect1 id="acquisition-system">
<title>Acquisition System Page</title>
<para id="acquisitionSystem">
<screenshot>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="Images/acquisitionSystem.png" format="PNG"/>
	  </imageobject>
	  <imageobject>
	    <imagedata fileref="Images/acquisitionSystem.eps" format="EPS"/>
	  </imageobject>
	  <textobject>
	    <phrase>Acquisition System.</phrase>
	  </textobject>
	</mediaobject>
</screenshot>
</para>
<para>This page allows you to specify information about the acquisition system used to do the experiment.</para>
<para>
All the fields are self-explanatory, but the following fields may need clarification:
</para>
<itemizedlist>
<listitem>
<para>
Initial offset: some acquisition systems record the data with a fixed offset.
</para>
</listitem>
<listitem>
<para>
Voltage range: the total voltage range, e.g. if the system is set to ±5V, the range is 10V.
</para>
</listitem>
</itemizedlist>
</sect1>
<sect1 id="video">
<title>Video Page</title>
<para id="video-screenShot">
<screenshot>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="Images/video.png" format="PNG"/>
	  </imageobject>
	  <imageobject>
	    <imagedata fileref="Images/video.eps" format="EPS"/>
	  </imageobject>
	  <textobject>
	    <phrase>Video.</phrase>
	  </textobject>
	</mediaobject>
</screenshot>
</para>

<para>If your experimental set up includes a video recording, this page allows you to specify the your video system configuration.</para>
</sect1>
<sect1 id="lfp">
<title>Local Field Potential Page</title>
<para id="lfp-screenShot">
<screenshot>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="Images/lfp.png" format="PNG"/>
	  </imageobject>
	  <imageobject>
	    <imagedata fileref="Images/lfp.eps" format="EPS"/>
	  </imageobject>
	  <textobject>
	    <phrase>Local Field Potential.</phrase>
	  </textobject>
	</mediaobject>
</screenshot>
</para>

<para>This page allows you to specify the sampling rate of the local field potentials.</para>
</sect1>

<sect1 id="files">
<title>Files Page</title>
<para id="files-screenShot">
<screenshot>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="Images/files.png" format="PNG"/>
	  </imageobject>
	  <imageobject>
	    <imagedata fileref="Images/files.eps" format="EPS"/>
	  </imageobject>
	  <textobject>
	    <phrase>Files.</phrase>
	  </textobject>
	</mediaobject>
</screenshot>
</para>
<para>
This page is available only in the <guilabel>Expert Mode</guilabel>.
</para>
<para>The recorded data are stored in a file with the generic name <filename>base.dat</filename>. The sampling rate and the number of channels used are set in the <link linkend="acquisitionSystem">Acquisition System  Page</link>. The local field potentials are stored in a file with the generic name <filename>base.eeg</filename>, and more generally the file name is <filename>base.ext</filename> for any other type of filtered data (where <filename>ext</filename> is an extension describing the type of data stored in the file). 
</para>
<para>
In this framework, each type of filtered data is defined by its file extension, its sampling rate and the number of channels it uses. Each channel, can be a one to one mapping with a channel in the original recording or a one to many mapping. This page allows you to describe the different filtered data related to the recorded data.
</para>
<para>
To add a new type of filtered data, press the <guibutton>Add File</guibutton> button; a new tab will be created where you will be able to set the information. The new tab caption will be set to the extension value provided in the <guilabel>Extension</guilabel> lineedit. To remove a type of filtered data, simply press the <guibutton>Remove File</guibutton> button. 
</para>
<para>
New type of filtered data with a one to one channel mapping with the original recording can be created by <ulink url="http://neuroscope.sourceforge.net">NeuroScope</ulink> (this is why this page is not part of the default mode). Simply open with NeuroScope a file with the new type of filtered data. You will be prompted for the corresponding sampling rate and the association file extension - sampling rate will be stored in the parameter file.
</para>
<para>
To add a channel mapping, press the <guibutton>Add</guibutton> button; in the newly created cell type in the channel ids separated by a whitespace. To remove channel mappings, select the corresponding rows and press the <guibutton>Remove</guibutton> button. The mapped channel ids will start at 0 for the first row to n-1 for the nth row. 
</para>
</sect1>
<sect1 id="anatomical-groups">
<title>Anatomical Groups Page</title>
<para id="anatomy">
<screenshot>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="Images/anatomy.png" format="PNG"/>
	  </imageobject>
	  <imageobject>
	    <imagedata fileref="Images/anatomy.eps" format="EPS"/>
	  </imageobject>
	  <textobject>
	    <phrase>Anatomical Groups.</phrase>
	  </textobject>
	</mediaobject>
</screenshot>
</para>
<para>
This page is available only in the <guilabel>Expert Mode</guilabel>.
</para>
<para>Anatomical groups allow you to classify you channels. Suppose you record data from both the neocortex and the hippocampus: you may want to assign all channels recorded from the neocortex into one group, and all channels recorded from the hippocampus into another group, or maybe have two distinct groups for CA1 and CA3, respectively. This is what anatomical groups are for. More generally however, anatomical groups can be used to implement any classification you may wish, e.g. sites from the same shank in recordings using silicon probes. Usually those groups are created graphically with <ulink url="http://neuroscope.sourceforge.net">NeuroScope</ulink> within the <guilabel>Anatomical Groups Palette</guilabel> (this is why this page is not part of the default mode).
</para>
<para>
To add a group, press the <guibutton>Add</guibutton> button; in the newly created cell type in the channel ids separated by a whitespace. To remove groups, select the corresponding rows and press the <guibutton>Remove</guibutton> button. The unlisted channels are not part of any group. 
</para>
<para>
The <guilabel>Channel Attributes</guilabel> table lists the attributes which can be associated to channels. There is currently only one defined attribute, the skip attribute which value can be 0 or 1 (the default value being 0). See the <ulink url="http://neuroscope.sourceforge.net">NeuroScope</ulink>'s user manual (section Skipping Channels) for a use of this attribute.
</para>
</sect1>
<sect1 id="spike-groups">
<title>Spike Groups Page</title>
<para id="spike">
<screenshot>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="Images/spike.png" format="PNG"/>
	  </imageobject>
	  <imageobject>
	    <imagedata fileref="Images/spike.eps" format="EPS"/>
	  </imageobject>
	  <textobject>
	    <phrase>Spike Groups.</phrase>
	  </textobject>
	</mediaobject>
</screenshot>
</para>
<para>
This page is available only in the <guilabel>Expert Mode</guilabel>.
</para>
<para>
Spike groups are related to unit activity. In most experimental paradigms, you will want to study neuronal firing patterns, and thus you will need to extract unit activity from local field potentials. Usually, the spikes emitted by each single unit appear only on a limited subset of the channels. In the framework &ndmanager; is part of, each such set of channels (e.g. a tetrode) is referred to as a spike group. Remember that spike groups are not necessarily equivalent to physical electrode groups: for instance, if one channel from a tetrode is floating or too noisy, discarding it altogether will yield better results during subsequent spike sorting. In general, these groups cannot be efficiently defined without first inspecting the data. This is why <ulink url="http://neuroscope.sourceforge.net">NeuroScope</ulink> provides the ability to graphically define spike groups and why this page is not part of the default mode.
</para>
<para>
To add a group, press the <guibutton>Add</guibutton> button; in the newly created row, type in the <guilabel>Channels</guilabel> column the channel ids separated by a whitespace. To remove groups, select the corresponding rows and press the <guibutton>Remove</guibutton> button. The unlisted channels are not part of any group. 
</para>
<para>
The two columns <guilabel># Samples per waveform</guilabel> and <guilabel>Peak sample</guilabel> provide information needed to extact spikes from the local field potentials. The last column, <guilabel>Features</guilabel>, provides information for spike sorting. In the current version of the framework &ndmanager; is part of, PCA coefficients are used as spike features to perform spike sorting and the value contained in the column <guilabel>Features</guilabel> represents the number of principal components to use for a given spike group.
</para>
<para>
In most of the cases, you do not have to manually fill the three last columns as this will be done by a dedicated script (see the <link linkend="scripts">Scripts Page</link>).
</para>
</sect1>

<sect1 id="units">
<title>Units Page</title>
<para id="units-screenShot">
<screenshot>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="Images/units.png" format="PNG"/>
	  </imageobject>
	  <imageobject>
	    <imagedata fileref="Images/units.eps" format="EPS"/>
	  </imageobject>
	  <textobject>
	    <phrase>Units.</phrase>
	  </textobject>
	</mediaobject>
</screenshot>
</para>
<para>
This pages lets you list all the units recorded during the session, and provide important information about them, namely:
<itemizedlist>
<listitem>
<para>
<guilabel>Group</guilabel> - the electrode group.
</para>
</listitem>
<listitem>
<para>
<guilabel>Cluster</guilabel> - the cluster ID
</para>
</listitem>
<listitem>
<para>
<guilabel>Structure</guilabel> - the brain structure where the unit was recorded.
</para>
</listitem>
<listitem>
<para>
<guilabel>Type</guilabel> - the type of neuron, e.g. pyramidal cell.
</para>
</listitem>
<listitem>
<para>
<guilabel>I.D.</guilabel> - the isolation distance, which provides a quantitative measure of isolation quality.
</para>
</listitem>
<listitem>
<para>
<guilabel>Quality</guilabel> - a qualitative measure of isolation quality, which can be used to compare across different recording systems (isolation distances cannot be compared between e.g. a tetrode and an octrode).
</para>
</listitem>
<listitem>
<para>
<guilabel>Notes</guilabel> - user comments, e.g. about unresolved similarity between clusters.
</para>
</listitem>
</itemizedlist></para>
</sect1>


<sect1 id="neuroscope">
<title>NeuroScope Page</title>
<para id="neuroscope-screenShot">
<screenshot>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="Images/neuroscope.png" format="PNG"/>
	  </imageobject>
	  <imageobject>
	    <imagedata fileref="Images/neuroscope.eps" format="EPS"/>
	  </imageobject>
	  <textobject>
	    <phrase>NeuroScope.</phrase>
	  </textobject>
	</mediaobject>
</screenshot>
</para>

<para>This page allows you to specify the information needed by <ulink url="http://neuroscope.sourceforge.net">NeuroScope</ulink>. This information is divided into five sections: 
<itemizedlist>
<listitem>
<para>
<guilabel>Miscellaneous</guilabel>
</para>
</listitem>
<listitem>
<para>
<guilabel>Video</guilabel>
</para>
</listitem>
<listitem>
<para>
<guilabel>Clusters</guilabel>
</para>
</listitem>
<listitem>
<para>
<guilabel>Channel Colors</guilabel>
</para>
</listitem>
<listitem>
<para>
<guilabel>Channel Offsets</guilabel>
</para>
</listitem>
</itemizedlist>
</para>
<sect2>
<title>Miscellaneous</title>
<para>
In this page, you can specify the screen gain used to display the traces. In <ulink url="http://neuroscope.sourceforge.net">NeuroScope</ulink> amplitudes are described as follows. By convention, 'x1' corresponds to the current screen gain. Thus, assuming for instance a screen gain of 1&nbsp;mV/cm, an amplitude of 'x0.38' corresponds to 0.38&nbsp;mV/cm. 
</para>
<para>
The <guilabel>Background image</guilabel> field allows you to specify an image to be used as a background for the traces. You can use any image format supported by Qt: JPEG, PNG, BMP, XBM, XPM, PNM, MNG and GIF. See your Qt documentation for details (e.g. the QImageIO class description).
</para>
</sect2>
<sect2>
<title>Video</title>
<para>
In certain behavioral experiments, e.g. when studying place cells or head direction cells, it is necessary to record brain signals as well as the ongoing position and orientation of the animal. <ulink url="http://neuroscope.sourceforge.net">NeuroScope</ulink> has the ability to simultaneously display brain signals and the successive positions of the animal during the same episode. <ulink url="http://neuroscope.sourceforge.net">NeuroScope</ulink> uses the positions extracted from the video recording and stored in a position file.
</para>
<para>
By default, the positions are drawn against a black background, but an overview of the behavioral maze can also be used as a background image. This image can be flipped and rotated. In addition, an outline of the trajectory of the animal throughout the experiment can be drawn over the background (be it a black background or an image). All this is customizable through the following fields:
</para>
<itemizedlist>
<listitem>
<para>
<guilabel>Sampling rate (Hz)</guilabel>. Default sampling rate of the position file.
</para>
</listitem>
<listitem>
<para>
<guilabel>Width (pixels)</guilabel>. Default horizontal resolution of the video camera.
</para>
</listitem>
<listitem>
<para>
<guilabel>Height (pixels)</guilabel>. Default vertical resolution of the video camera.
</para>
</listitem>
<listitem>
<para>
<guilabel>Background image</guilabel>. Background image to draw the positions against. You can use any image format supported by Qt: JPEG, PNG, BMP, XBM, XPM, PNM, MNG and GIF. See your Qt documentation for details (e.g. the QImageIO class description).
</para>
</listitem>
<listitem>
<para>
<guilabel>Draw trajectory</guilabel>. Activate this to draw over the background (be it a black background or an image) an outline of the trajectory of the animal throughout the experiment.
</para>
</listitem>
<listitem>
<para>
<guilabel>Rotate CCW (degrees)</guilabel>. This allows you to rotate (counterclockwise) both the position data and the background image.
</para>
</listitem>
<listitem>
<para>
<guilabel>flip</guilabel>. This allows you to flip both the position data and the background image.
</para>
</listitem>
</itemizedlist>
</sect2>
<sect2>
<title>Clusters</title>
<para>
<ulink url="http://neuroscope.sourceforge.net">NeuroScope</ulink> allows you to browse identified unit activity together with local field potentials. In order to be able to do this, <ulink url="http://neuroscope.sourceforge.net">NeuroScope</ulink> needs the information provided in this page together with the timestamp and the cluster Id of each spike (which are stored in a cluster file and a spike time file respectively).
</para>
<para>
The <guilabel>Number of samples per waveform</guilabel> and the <guilabel>index of the peak sample</guilabel> allows <ulink url="http://neuroscope.sourceforge.net">NeuroScope</ulink> to highlight the spike waveforms on the traces.
</para>
</sect2>
<sect2>
<title>Channel Colors</title>
<para>
This tab is available only in the <guilabel>Expert Mode</guilabel>.
</para>
<para>
In order to make individual channels as well as channel groups more readily visible, channels can be colored using three different schemes:
</para>
<itemizedlist>
<listitem>
<para>
By Anatomical Group: A color can be assigned to all the channels in a given anatomical group, this color is referred to as the Anatomical Group color for the given channels.
</para>
</listitem>
<listitem>
<para>
By Spike Group: Similarly, a color can be assigned to all the channels in a given spike group, this color is referred to as the Spike Group colors for the given channels.
</para>
</listitem>
<listitem>
<para>
By Channel: Additionally, an individual channel can also be assigned a color.
</para>
</listitem>
</itemizedlist>
<para>
To change a color, you can either manually type in the html color code or do it graphically. Middle-click on the cell containing the color to modify, this brings up the <guilabel>Color Chooser</guilabel>, as soon as you validate your new choice, the cell value is updated.
</para>
<para>
Usually the colors are set graphically with <ulink url="http://neuroscope.sourceforge.net">NeuroScope</ulink>, this is why this page is not part of the default mode.
</para>
</sect2>
<sect2>
<title>Channel Offsets</title>
<para>
This tab is available only in the <guilabel>Expert Mode</guilabel>.
</para>
<para>
When the physical organization of your electrodes is more complex than vertical arrays (e.g. epidural electrodes covering the surface of the brain), you might want to store  your electrode layout. This can be done by redefining the default offsets. The table contained in this page lists the default offsets.
</para>
<para>
Usually the default offsets are set graphically with <ulink url="http://neuroscope.sourceforge.net">NeuroScope</ulink>, this is why this page is not part of the default mode.
</para>
</sect2>
</sect1>
<sect1 id="scripts">
<title>Scripts Page</title>
<para id="scripts-screenShot">
<screenshot>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="Images/programs.png" format="PNG"/>
	  </imageobject>
	  <imageobject>
	    <imagedata fileref="Images/programs.eps" format="EPS"/>
	  </imageobject>
	  <textobject>
	    <phrase>Scripts.</phrase>
	  </textobject>
	</mediaobject>
</screenshot>
</para>
<para>In the framework &ndmanager; is part of the data processing is accomplished by a set of programs launch by scripts (e.g a program would convert data from the recording system format to the format used by <ulink url="http://neuroscope.sourceforge.net">NeuroScope</ulink>). To centralize all the information for a given experiment, the parameter file contains all the parameters used to view/process/analyze your data, this includes the parameters needed by the scripts.
</para>
<para>
Each script is described by its name, the list of its parameters and their default values, and a small help text (describing the goals of the script and explaining its parameters).
</para>
<para>
How does &ndmanager; get its information about the scripts, in order to present a nice graphical interface? The information for each script can be stored in small (xml) description file and loaded into &ndmanager;. Some programs and their corresponding scripts are provided as part of the framework. To load a script description, go to the <guilabel>Scripts Page</guilabel> and press the <guibutton>Load</guibutton> button and navigate to the desire file. You can load several files at a time using Shift or Control while selecting the files in the dialog (the order of the scripts in &ndmanager; does not matter). Upon loading, a new page with a set of three tabs (<guilabel>Parameters</guilabel>, <guilabel>Help</guilabel> and <guilabel>Script</guilabel>) containing the information corresponding to the script will be created.
</para>

<para>
The framework provides some programs and their corresponding scripts, but you will certainly need to do specific processing on your data. You will therefore need to write your own programs and scripts. The scripts should read the parameters from the xml parameter file and then call the programs. 
</para>

<note>
<para>
Try to keep the programs and scripts modular (one task per script/program) and separate (independent).
</para>
</note>

<para>
Once you have written your script and program, you will need to create a new script description. This is very easy to do with NDManager. First, be sure to be in <guilabel>Expert Mode</guilabel> (select <menuchoice> <guimenu>Settings</guimenu> <guimenuitem>Expert Mode</guimenuitem> </menuchoice>) and go to the <guilabel>Scripts Page</guilabel> and press the <guibutton>Add</guibutton> button; a new page with a set of three tabs (<guilabel>Parameters</guilabel>, <guilabel>Help</guilabel> and <guilabel>Script</guilabel>) will be created. Use this page to describe your new script.
</para>
<para>
The <guilabel>Parameters</guilabel> tab allows you to specify the parameters used by the script. To add a parameter, press the <guibutton>Add</guibutton> button; and, in the newly created row provide the parameter name, default value and status. To remove parameters, select the corresponding rows and press the <guibutton>Remove</guibutton> button.
</para>
<para>
The <guilabel>Help</guilabel> tab contains a simple text editor which allows you to describe the aim of the script and provide information about the parameters. This description is saved in the parameter file.
</para>
<para>
The <guilabel>Script</guilabel> tab contains an advanced text editor with syntax highlighting (it is a Kate Part) which allows you to easily edit your script (if the script is in 
your path, it will be automatically loaded when you specify its name in the Parameters tab). To save the modification done to your scrip, press the <guibutton>Save Script as...</guibutton> button.
</para>
<note>
<para>
Using the application <menuchoice> <guimenu>File</guimenu> <guimenuitem>Save</guimenuitem> </menuchoice> entry will save the parameter file (including the script descriptions) but not the script itself.
</para>
</note>

<para>
Using the application <menuchoice> <guimenu>File</guimenu> <guimenuitem>Save</guimenuitem> </menuchoice> entry will save your new script description in the current parameter file. To save your new script description to file (the containts of the <guilabel>Parameters</guilabel> and <guilabel>Help</guilabel> tabs), press the <guibutton>Save Script Description As ...</guibutton> button. Creating a script description file, allows you to reuse the same script for different kind of experiments and to share it with other researchers. 
</para>

<para>
To remove a script description from a given parameter file, simply press the <guibutton>Remove Script</guibutton> button.
</para>
</sect1>
</chapter>

<chapter id="monitoring">
<title>Data Processing</title>
<para id="monitoring-screenShot">
<screenshot>
	<mediaobject>
	  <imageobject>
	    <imagedata fileref="Images/processManager.png" format="PNG"/>
	  </imageobject>
	  <imageobject>
	    <imagedata fileref="Images/processManager.eps" format="EPS"/>
	  </imageobject>
	  <textobject>
	    <phrase>Process Manager.</phrase>
	  </textobject>
	</mediaobject>
</screenshot>
</para><para>
Selecting <menuchoice> <guimenu>Actions</guimenu> <guimenuitem>Show Processing Manager</guimenuitem> </menuchoice> will open a terminal screen where processing commands can be entered. At the bottom of the screen, several buttons and popup menus allow you to quickly open specific session files with the appropriate application: for instance, choosing <guilabel>.dat</guilabel> from the leftmost popup menu and clicking on the icon to the left will open the raw data file with NeuroScope. Similarly, the rightmost button and popup menu can be used to quickly start cluster cutting using Klusters. The central buttons and popup menu let you start selected scripts listed in the <guilabel>Scripts</guilabel> page.
</para>

</chapter>

<chapter id="query">
<title>Queries</title>
<para>
Queries are a means to look for specific information in several parameter files at once. For instance, you might want to list all the pyramidal cells that you have recorded in area CA1 of the hippocampus during the course of an experiment comprising several dozens of recordings. Here is how you would proceed. Select <menuchoice> <guimenu>Actions</guimenu> <guimenuitem>Query</guimenuitem> </menuchoice>. This will open a small dialog where you can type a query (in standard <acronym>XQuery</acronym> form) and a path, i.e. a starting directory under which all parameter files will be analyzed. In our example, you would type the following query:
</para>
<programlisting>
//units/unit[type='PC' and structure='CA1']/*
</programlisting>
<para>
assuming this is how you supplied information about units in the <guilabel>Units</guilabel> page. &ndmanager; will then search parameter files for all pyramidal cells recorded from CA1, and list them graphically. The output can be saved to disk either in <acronym>HTML</acronym> format (which can then be viewed using any browser), or in plain text format (which can then be used as an input for batch processing scripts).
</para>
<note>
<para>
<acronym>XQuery</acronym> is a standard query language for <acronym>XML</acronym> data. Detailed information is available on hundreds of websites around the internet.
</para>
</note>

</chapter>


<chapter id="file-formats">
<title>File Formats</title>

<sect1 id="parameter_files">
<title>Parameter Files</title>
<para>
Generic file name:  <filename>base.xml</filename>
</para>
<para>
Format: <acronym>XML</acronym>
</para>
<para>
&ndmanager; creates and updates the parameter file. You should not have to directly manipulate this file. For information, the schema of the parameter file (parameter.xsd) in part of the source package.
</para>
</sect1>

<sect1 id="description_files">
<title>Script Description Files</title>
<para>
Generic file name:  <filename>name.xml</filename>
</para>
<para>
Format: <acronym>XML</acronym>
</para>
<para>
The parameter file contains a section dedicated to the scripts used to process the data. Those scripts can be described separately in script description files; &ndmanager; loads and creates the script description files. You should not have to directly manipulate this file. For information, the schema of the script description file (description.xsd) in part of the source package.
</para>
</sect1>
</chapter>

<chapter id="menu-entries">
<title>Menu Entries</title>
<sect1 id="menu-file">
<title>The File Menu</title>
<para>
<variablelist>
<varlistentry>
<term><menuchoice>
<shortcut>
<keycombo><keycap>Ctrl</keycap><keycap>O</keycap></keycombo>
</shortcut>
<guimenu>File</guimenu>
<guimenuitem>Open</guimenuitem>
</menuchoice></term>
<listitem><para>Opens parameter files</para></listitem>
</varlistentry>
<varlistentry>
<term><menuchoice>
<guimenu>File</guimenu>
<guimenuitem>Open Recent</guimenuitem>
</menuchoice></term>
<listitem><para>Opens data parameter selected from a list of recently edited data files.</para></listitem>
</varlistentry>
<varlistentry>
<term><menuchoice>
<guimenu>File</guimenu>
<guimenuitem>Import File as Model...</guimenuitem>
</menuchoice></term>
<listitem><para>Imports a parameter file to be used as model for the creation of a new file.</para></listitem>
</varlistentry>
<varlistentry>
<term><menuchoice>
<shortcut>
<keycombo><keycap>Ctrl</keycap><keycap>S</keycap></keycombo>
</shortcut>
<guimenu>File</guimenu>
<guimenuitem>Save</guimenuitem>
</menuchoice></term>
<listitem><para>Saves the parameter file.</para></listitem>
</varlistentry>
<varlistentry>
<term><menuchoice>
<guimenu>File</guimenu>
<guimenuitem>Save As</guimenuitem>
</menuchoice></term>
<listitem><para>Saves the parameter file in a new location.</para></listitem>
</varlistentry>
<varlistentry>
<term><menuchoice>
<guimenu>File</guimenu>
<guimenuitem>Save As Default</guimenuitem>
</menuchoice></term>
<listitem><para>Sets the current parameter file as the default file.</para></listitem>
</varlistentry>
<varlistentry>
<term><menuchoice>
<guimenu>File</guimenu>
<guimenuitem>Close</guimenuitem>
</menuchoice></term>
<listitem><para>Closes the parameter file.</para></listitem>
</varlistentry>
<varlistentry>
<term><menuchoice>
<shortcut>
<keycombo><keycap>Ctrl</keycap><keycap>Q</keycap></keycombo>
</shortcut>
<guimenu>File</guimenu>
<guimenuitem>Quit</guimenuitem>
</menuchoice></term>
<listitem><para>Quits &kapp; (will prompt for saving if necessary).</para></listitem>
</varlistentry>
</variablelist>
</para>
</sect1>

<sect1 id="menu-actions">
<title>The Actions Menu</title>
<para>
<variablelist>
<varlistentry>
<term><menuchoice>
<guimenu>Actions</guimenu>
<guimenuitem>Show Processing Manager</guimenuitem>
</menuchoice></term>
<listitem><para>Shows the <guilabel>Processing Manager</guilabel>. This can be hidden by typing 'exit' in the terminal screen.</para></listitem>
</varlistentry>
<varlistentry>
<term><menuchoice>
<guimenu>Settings</guimenu>
<guimenuitem>Query</guimenuitem>
</menuchoice></term>
<listitem><para>Searches for similar information across several parameter files.</para></listitem>
</varlistentry>
</variablelist>
</para>
</sect1>

<sect1 id="menu-settings">
<title>The Settings Menu</title>
<para>
<variablelist>
<varlistentry>
<term><menuchoice>
<guimenu>Settings</guimenu>
<guimenuitem>Show Toolbar</guimenuitem>
</menuchoice></term>
<listitem><para>Shows or hides the <guilabel>Toolbar</guilabel>.</para></listitem>
</varlistentry>
<varlistentry>
<term><menuchoice>
<guimenu>Settings</guimenu>
<guimenuitem>Show Status Bar</guimenuitem>
</menuchoice></term>
<listitem><para>Shows or hides the <guilabel>Status Bar</guilabel>.</para></listitem>
</varlistentry>
<varlistentry>
<term><menuchoice>
<guimenu>Settings</guimenu>
<guimenuitem>Configure Shortcuts</guimenuitem>
</menuchoice></term>
<listitem><para>Lets you configure the shortcuts.</para></listitem>
</varlistentry>
</variablelist>
</para>
</sect1>

<sect1 id="menu-help">
<title>The Help Menu</title>
<para>
<variablelist>
<varlistentry>
<term><menuchoice>
<guimenu>Help</guimenu>
<guimenuitem>&ndmanager; Handbook</guimenuitem>
</menuchoice></term>
<listitem><para>Opens this user manual in the <guilabel>Help Center</guilabel>.</para></listitem>
</varlistentry>
<varlistentry>
<term><menuchoice>
<guimenu>Help</guimenu>
<guimenuitem>What's this?</guimenuitem>
</menuchoice></term>
<listitem><para>Activates the context help tool.</para></listitem>
</varlistentry>
<varlistentry>
<term><menuchoice>
<guimenu>Help</guimenu>
<guimenuitem>Report Bug</guimenuitem>
</menuchoice></term>
<listitem><para>Helps you compose an e-mail message to report a bug to the author of &ndmanager;.</para></listitem>
</varlistentry>
<varlistentry>
<term><menuchoice>
<guimenu>Help</guimenu>
<guimenuitem>About &ndmanager;</guimenuitem>
</menuchoice></term>
<listitem><para>Shows information about the authors of and contributors to &ndmanager;.</para></listitem>
</varlistentry>
<varlistentry>
<term><menuchoice>
<guimenu>Help</guimenu>
<guimenuitem>About KDE</guimenuitem>
</menuchoice></term>
<listitem><para>Shows information about the authors of and contributors to <acronym>KDE</acronym>.</para></listitem>
</varlistentry>
</variablelist>
</para>
</sect1>

</chapter>

<!-- Include credits for the programmers, documentation writers, and
contributors here. The license for your software should then be included below
the credits with a reference to the appropriate license file included in the KDE
distribution. -->
<chapter id="credits">
<title>Credits and License</title>

<para>
&ndmanager;
</para>
<para>
Program copyright 2004 Lynn Hazan <email>lynn&#46;hazan&#64;myrealbox&#46;com</email>
</para>
<para>
Contributors:
<itemizedlist>
<listitem><para>Michaël B. Zugaro <email>michael.zugaro@college-de-france</email></para>
</listitem>
</itemizedlist>
</para>

<para>
Documentation copyright 2004 Lynn Hazan <email>lynn&#46;hazan&#64;myrealbox&#46;com</email>
</para>

<!-- TRANS:CREDIT_FOR_TRANSLATORS -->

&underFDL;               <!-- FDL: do not remove -->

<!-- Determine which license your application is licensed under, 
     and delete all the remaining licenses below:

     (NOTE:  All documentation are licensed under the FDL, 
     regardless of what license the application uses) -->

&underGPL;        	 <!-- GPL License -->

</chapter>

<appendix id="installation">
<title>Installation</title>

<sect1 id="getting-ndmanager">
<title>How to obtain &ndmanager;</title>

<para>
&ndmanager; can be found on
<ulink url="http://ndmanager.sourceforge.net">http://ndmanager.sourceforge.net</ulink>.
</para>
</sect1>

<sect1 id="requirements">
<title>Requirements</title>

<!--
List any special requirements for your application here. This should include:
.Libraries or other software that is not included in kdesupport,
kdelibs, or kdebase.
.Hardware requirements like amount of RAM, disk space, graphics card
capabilities, screen resolution, special expansion cards, etc.
.Operating systems the app will run on. If your app is designed only for a
specific OS, (you wrote a graphical LILO configurator for example) put this
information here.
-->

<para>
&ndmanager; requires KDE >= 3.1, QT >= 3.1 and <ulink url="http://www.xmlsoft.org/downloads.html">libxml2</ulink> >= 2.5.4
</para>
<para>
To build &ndmanager; from source, you will also need the corresponding devel packages and an ANSI C++ Standard compliant compiler (gcc version 3.2.2 is known to work).
</para>
</sect1>

<sect1 id="compilation">
<title>Compilation and Installation</title>

<para>
In order to compile and install &ndmanager; on your system, download and extract the source archive, then type the following in the base directory:
<screen width="40">
<prompt>%</prompt> <userinput>./configure --prefix=`kde-config --prefix`</userinput>
<prompt>%</prompt> <userinput>cd src</userinput>
<prompt>%</prompt> <userinput>make</userinput>
<prompt>%</prompt> <userinput>make install</userinput>
</screen>
</para>
</sect1>

</appendix>

&documentation.index;
</book>

<!--
Local Variables:
mode: sgml
sgml-minimize-attributes:nil
sgml-general-insert-case:lower
sgml-indent-step:0
sgml-indent-data:nil
End:

vim:tabstop=2:shiftwidth=2:expandtab 
-->

